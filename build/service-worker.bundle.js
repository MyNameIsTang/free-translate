chrome.runtime.onInstalled.addListener(async()=>{for(const e of chrome.runtime.getManifest().content_script)for(const t of await chrome.tabs.query({url:e.matches}))chrome.scripting.executeScript({files:e.js,target:{tabId:t.id,allFrames:e.all_frames},injectImmediately:e.run_at==="document_start"})});chrome.commands.onCommand.addListener(async e=>{if(e!=="open-tab")return;const[t]=await chrome.tabs.query({active:!0,lastFocusedWindow:!0}),a=await chrome.tabs.sendMessage(t.id,{greeting:"hello"});console.log(a)});
